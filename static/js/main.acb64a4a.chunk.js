(window.webpackJsonpdelayedmotion=window.webpackJsonpdelayedmotion||[]).push([[0],{50:function(e,t,a){e.exports=a(95)},56:function(e,t,a){},57:function(e,t,a){},80:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),c=a.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(55),a(56);var i=a(6),o=(a(57),a(103)),s=a(99),u=a(41),m=a.n(u),h=a(101),d=a(97),g=a(98),p=a(46),f=a(100),b=a(102),E=a(49),w=(a(79),0),j=1,v={UploadImage:0,SelectArea:1,DownloadImage:2},O=(a(80),function(e){var t=e.onNextStep,a=Object(n.useState)(w),r=Object(i.a)(a,2),c=r[0],o=r[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),v=m[0],O=m[1],y=Object(n.useState)(!1),S=Object(i.a)(y,2),k=S[0],C=S[1],I=Object(n.useState)(!1),F=Object(i.a)(I,2),N=F[0],R=F[1],x=Object(E.a)({accept:"image/jpeg, image/png",onDrop:function(e){if(e[0]){var a=new FileReader;a.onload=function(){var e=new Image;e.src=a.result,e.onload=function(){t(e)}},a.readAsDataURL(e[0])}},disabled:N}),M=x.rejectedFiles,U=x.getRootProps,A=x.getInputProps,D=M.map((function(e){return l.a.createElement("li",{key:e.path},e.path," \u306f\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002")})),L=Object(n.useCallback)((function(e){C(!1),O(e.target.value)})),z=Object(n.useCallback)((function(){R(!0),C(!1);var e=new Image;e.crossOrigin="anonymous",e.src="https://api-gw98.herokuapp.com/"+v,e.onload=function(a){R(!1),t(e)},e.onerror=function(e){R(!1),C(!0)}}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{activeKey:c,onSelect:function(e){return o(e)}},l.a.createElement(d.a,{eventKey:w,title:"\u753b\u50cf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"},l.a.createElement("div",U({className:"dropzone"+(N?" disabled":"")}),l.a.createElement("input",A()),l.a.createElement("p",null,"\u753b\u50cf\u3092\u3053\u3053\u306b\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u304b\u3001\u30af\u30ea\u30c3\u30af\u3057\u3066\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"),l.a.createElement("em",null,"jpeg \u3082\u3057\u304f\u306f png \u306e\u307f\u6307\u5b9a\u53ef\u80fd)")),l.a.createElement("ol",null,D)),l.a.createElement(d.a,{eventKey:j,title:"\u753b\u50cf\u306eURL\u3092\u6307\u5b9a"},l.a.createElement(g.a,{className:"mb-3"},l.a.createElement(p.a,{placeholder:"\u753b\u50cf\u306eURL",value:v,onChange:L,isInvalid:k,readOnly:N}),l.a.createElement(g.a.Append,null,l.a.createElement(s.a,{variant:"outline-primary",onClick:z,disabled:!v||N},N&&l.a.createElement(f.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"btn-inner-spinner"}),"\u753b\u50cf\u3092\u9078\u629e")),l.a.createElement(b.a.Control.Feedback,{type:"invalid"},"\u6307\u5b9a\u3057\u305fURL\u306f\u753b\u50cf\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f")))))}),y=a(48),S=a.n(y),k=(a(91),a(92),function(e){var t=e.onNextStep,a=e.image,r=Object(n.useState)(Object(n.createRef)()),c=Object(i.a)(r,2),u=c[0],m=(c[1],Object(n.useState)(Object(n.createRef)())),h=Object(i.a)(m,2),d=h[0],g=(h[1],Object(n.useState)(Object(n.createRef)())),p=Object(i.a)(g,2),f=p[0],E=(p[1],Object(n.useState)({})),w=Object(i.a)(E,2),j=w[0],v=w[1];Object(n.useEffect)((function(){var e=u.current;e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0,a.width,a.height);var t=f.current;t.width=a.width,t.height=a.height}),[a]);var O=Object(n.useCallback)((function(){var e=Object.assign({},j,{width:5*Math.floor(j.width/5)+1,height:5*Math.floor(j.height/5)+1}),t=u.current,n=t.getContext("2d"),l=a.width/t.clientWidth,r=f.current,c=r.getContext("2d");c.drawImage(a,0,0,a.width,a.height);var i=Math.floor(e.width/5),o=Math.floor(e.height/5),s=d.current;s.width=i,s.height=o;var m=s.getContext("2d");if(s.width<1||s.height<1)n.drawImage(r,0,0);else{m.fillStyle="#000000",m.fillRect(0,0,s.width,s.height),m.fillStyle="#FF0000",m.beginPath(),m.ellipse(s.width/2,s.height/2,s.width/2*.9,s.height/2*.9,0,0,2*Math.PI),m.fill();var h=m.getImageData(0,0,s.width,s.height).data,g=5*l,p=e.x*l,b=(e.width,e.y*l);e.height;c.fillStyle="rgb(0,0,0,0.5)",c.fillRect(e.x*l,e.y*l,Math.floor((e.width+1)/5)*g,Math.floor((e.height+1)/5)*g);for(var E=b,w=0;w<o;E+=g,++w)for(var O=p,y=0;y<i;O+=g,++y)0==h[4*(y+w*i)+0]&&Math.random()<.3&&(c.fillStyle="#FFFFFF",c.fillRect(O,E,g+l,g+l));n.drawImage(r,0,0),v(e)}}),[u,f,d,j]),y=Object(n.useCallback)((function(){u.current.toBlob((function(e){t(e)}),"image/jpeg",.9)}),[a,j]),k=j.width&&j.height;return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a.Text,null,l.a.createElement(b.a.Group,null,l.a.createElement(s.a,{disabled:!k,onClick:y},"\u9078\u629e\u5b8c\u4e86")),l.a.createElement(S.a,{renderComponent:l.a.createElement("canvas",{ref:u,style:{width:"100%"}}),crop:j,onChange:function(e){return v(e)},onComplete:function(){return O()}})),l.a.createElement("canvas",{ref:f,style:{width:"100%",display:"none"}}),l.a.createElement("canvas",{ref:d,style:{display:"none"}}))}),C=a(47),I=(a(93),a(94)),F=function(e){var t=e.image,a=e.onNextStep,r=Object(n.useState)(""),c=Object(i.a)(r,2),o=c[0],u=c[1];Object(n.useEffect)((function(){var e=new FileReader;e.onload=function(e){u(e.target.result)},e.readAsDataURL(t)}),[t]);var m=Object(n.useCallback)((function(){I(t,"sample.jpg","image/jpeg")}),[t]),h=Object(n.useCallback)((function(){a()}),[a]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a.Row,null,l.a.createElement(b.a.Group,{as:C.a},l.a.createElement(s.a,{onClick:m},"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9")),l.a.createElement(b.a.Group,{as:C.a},l.a.createElement(s.a,{variant:"secondary",onClick:h},"\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3059"))),l.a.createElement("div",{className:"image-preview"},l.a.createElement("img",{src:o,className:"layout"}),l.a.createElement("img",{src:o,className:"main",style:{left:0,top:0}})))},N=[{title:"\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"},{title:"\u63fa\u3089\u3059\u7bc4\u56f2\u3092\u8a2d\u5b9a"},{title:"\u5b8c\u6210"}],R="\u63fa\u308c\u308b\u753b\u50cf\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf";var x=function(){var e=Object(n.useState)(v.UploadImage),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),u=Object(i.a)(c,2),h=u[0],d=u[1],g=Object(n.useState)(null),p=Object(i.a)(g,2),f=p[0],b=p[1],E=Object(n.useCallback)((function(e){d(e),r(v.SelectArea)})),w=Object(n.useCallback)((function(e){b(e),r(v.DownloadImage)})),j=Object(n.useCallback)((function(){r(v.UploadImage)}));return l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,R),l.a.createElement("div",{className:"stepper"},l.a.createElement(m.a,{steps:N,activeStep:a})),l.a.createElement(o.a,null,l.a.createElement(o.a.Body,null,[l.a.createElement(O,{onNextStep:E}),l.a.createElement(k,{onNextStep:w,image:h}),l.a.createElement(F,{onNextStep:j,image:f})][a])),l.a.createElement("div",{className:"footer"},l.a.createElement(s.a,{variant:"link",size:"sm",href:"https://twitter.com/sharkpp"},"@sharkpp"),l.a.createElement(s.a,{variant:"link",size:"sm",href:"https://github.com/sharkpp/delayedmotion/issues/new"},"\u4e0d\u5177\u5408\u5831\u544a")))};c.a.render(l.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[50,1,2]]]);
//# sourceMappingURL=main.acb64a4a.chunk.js.map