(window.webpackJsonpdelayedmotion=window.webpackJsonpdelayedmotion||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(20),c=a.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(59),a(60);var i=a(6),o=(a(61),a(32)),u=a.n(o),s=a(47),m=a.n(s),d=a(109),h=a(105),g=a(106),f=a(51),b=a(107),p=a(108),w=a(110),j=a(53),v=(a(83),0),E=1,O={UploadImage:0,SelectArea:1,DownloadImage:2},y=(a(84),function(e){var t=e.onNextStep,a=Object(n.useState)(v),r=Object(i.a)(a,2),c=r[0],o=r[1],u=Object(n.useState)(""),s=Object(i.a)(u,2),m=s[0],O=s[1],y=Object(n.useState)(!1),S=Object(i.a)(y,2),C=S[0],k=S[1],F=Object(n.useState)(!1),I=Object(i.a)(F,2),R=I[0],x=I[1],N=Object(j.a)({accept:"image/jpeg, image/png",onDrop:function(e){if(e[0]){var a=new FileReader;a.onload=function(){var e=new Image;e.src=a.result,e.onload=function(){t(e)}},a.readAsDataURL(e[0])}},disabled:R}),M=N.rejectedFiles,U=N.getRootProps,A=N.getInputProps,D=M.map((function(e){return l.a.createElement("li",{key:e.path},e.path," \u306f\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002")})),L=Object(n.useCallback)((function(e){k(!1),O(e.target.value)})),B=Object(n.useCallback)((function(){x(!0),k(!1);var e=new Image;e.crossOrigin="anonymous",e.src="https://api-gw98.herokuapp.com/"+m,e.onload=function(a){x(!1),t(e)},e.onerror=function(e){x(!1),k(!0)}}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{activeKey:c,onSelect:function(e){return o(e)}},l.a.createElement(h.a,{eventKey:v,title:"\u753b\u50cf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"},l.a.createElement("div",U({className:"dropzone"+(R?" disabled":"")}),l.a.createElement("input",A()),l.a.createElement("p",null,"\u753b\u50cf\u3092\u3053\u3053\u306b\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u304b\u3001\u30af\u30ea\u30c3\u30af\u3057\u3066\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"),l.a.createElement("em",null,"jpeg \u3082\u3057\u304f\u306f png \u306e\u307f\u6307\u5b9a\u53ef\u80fd)")),l.a.createElement("ol",null,D)),l.a.createElement(h.a,{eventKey:E,title:"\u753b\u50cf\u306eURL\u3092\u6307\u5b9a"},l.a.createElement(g.a,{className:"mb-3"},l.a.createElement(f.a,{placeholder:"\u753b\u50cf\u306eURL",value:m,onChange:L,isInvalid:C,readOnly:R}),l.a.createElement(g.a.Append,null,l.a.createElement(b.a,{variant:"outline-primary",onClick:B,disabled:!m||R},R&&l.a.createElement(p.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"btn-inner-spinner"}),"\u753b\u50cf\u3092\u9078\u629e")),l.a.createElement(w.a.Control.Feedback,{type:"invalid"},"\u6307\u5b9a\u3057\u305fURL\u306f\u753b\u50cf\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f")))))}),S=a(111),C=a(52),k=a.n(C),F=(a(95),a(96),function(e){var t=e.onNextStep,a=e.image,r=Object(n.useState)(Object(n.createRef)()),c=Object(i.a)(r,2),o=c[0],u=(c[1],Object(n.useState)(Object(n.createRef)())),s=Object(i.a)(u,2),m=s[0],d=(s[1],Object(n.useState)(Object(n.createRef)())),h=Object(i.a)(d,2),g=h[0],f=(h[1],Object(n.useState)({})),p=Object(i.a)(f,2),j=p[0],v=p[1];Object(n.useEffect)((function(){var e=o.current;e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0,a.width,a.height);var t=g.current;t.width=a.width,t.height=a.height}),[a]);var E=Object(n.useCallback)((function(){var e=Object.assign({},j,{width:5*Math.floor(j.width/5)+1,height:5*Math.floor(j.height/5)+1}),t=o.current,n=t.getContext("2d"),l=a.width/t.clientWidth,r=g.current,c=r.getContext("2d");c.drawImage(a,0,0,a.width,a.height);var i=Math.floor(e.width/5),u=Math.floor(e.height/5),s=m.current;s.width=i,s.height=u;var d=s.getContext("2d");if(s.width<1||s.height<1)n.drawImage(r,0,0);else{d.fillStyle="#000000",d.fillRect(0,0,s.width,s.height),d.fillStyle="#FF0000",d.beginPath(),d.ellipse(s.width/2,s.height/2,s.width/2*.9,s.height/2*.9,0,0,2*Math.PI),d.fill();var h=d.getImageData(0,0,s.width,s.height).data,f=5*l,b=e.x*l,p=(e.width,e.y*l);e.height;c.fillStyle="rgb(0,0,0,0.5)",c.fillRect(e.x*l,e.y*l,Math.floor((e.width+1)/5)*f,Math.floor((e.height+1)/5)*f);for(var w=p,E=0;E<u;w+=f,++E)for(var O=b,y=0;y<i;O+=f,++y)0==h[4*(y+E*i)+0]&&Math.random()<.3&&(c.fillStyle="#FFFFFF",c.fillRect(O,w,f+l,f+l));n.drawImage(r,0,0),v(e)}}),[o,g,m,j]),O=Object(n.useCallback)((function(){o.current.toBlob((function(e){t(e)}),"image/jpeg",.9)}),[a,j]),y=j.width&&j.height;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a.Text,null,l.a.createElement(w.a.Group,null,l.a.createElement(b.a,{disabled:!y,onClick:O},"\u9078\u629e\u5b8c\u4e86")),l.a.createElement(k.a,{renderComponent:l.a.createElement("canvas",{ref:o,style:{width:"100%"}}),crop:j,onChange:function(e){return v(e)},onComplete:function(){return E()}})),l.a.createElement("canvas",{ref:g,style:{width:"100%",display:"none"}}),l.a.createElement("canvas",{ref:m,style:{display:"none"}}))}),I=(a(97),a(98)),R=function(e){var t=e.image,a=Object(n.useState)(""),r=Object(i.a)(a,2),c=r[0],o=r[1];Object(n.useEffect)((function(){var e=new FileReader;e.onload=function(e){o(e.target.result)},e.readAsDataURL(t)}),[t]);var u=Object(n.useCallback)((function(){I(t,"sample.jpg","image/jpeg")}),[t]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a.Group,null,l.a.createElement(b.a,{onClick:u},"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9")),l.a.createElement("div",{className:"image-preview"},l.a.createElement("img",{src:c,style:{width:"100%"}})))},x=[{title:"\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"},{title:"\u63fa\u3089\u3059\u7bc4\u56f2\u3092\u8a2d\u5b9a"},{title:"\u5b8c\u6210"}];var N=function(){var e=Object(n.useState)(O.UploadImage),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(i.a)(c,2),s=o[0],d=o[1],h=Object(n.useState)(null),g=Object(i.a)(h,2),f=g[0],b=g[1],p=Object(n.useCallback)((function(e){d(e),r(O.SelectArea)})),w=Object(n.useCallback)((function(e){b(e),r(O.DownloadImage)}));return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"stepper"},l.a.createElement(m.a,{steps:x,activeStep:a})),l.a.createElement(u.a,null,l.a.createElement(u.a.Body,null,[l.a.createElement(y,{onNextStep:p}),l.a.createElement(F,{onNextStep:w,image:s}),l.a.createElement(R,{image:f})][a])))};c.a.render(l.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},54:function(e,t,a){e.exports=a(103)},60:function(e,t,a){},61:function(e,t,a){},84:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.5fb1496d.chunk.js.map